# 전략

- AI가 답변을 생성하기 위해 주어진 프롬프트를 해석하고 뜻을 이해하는 과정이 추론(Reasoning)입니다. 
- 추론 전략을 구사함으로써 AI가 문제를 해결하기 위해 사고하는 과정을 제어할 수 있습니다.

## 분류

| 전략 분류 | 전략 이름 | 설명 | 대표 상황 |
| --- | --- | --- | --- |
| 단계적 사고 | 생각의 사슬 (CoT) | 단계적으로 사고하여 정확도 향상 | 수학 문제 풀이, 재무 분석, 논리적 판단 |
|  | 탑다운 (Top-down) | 상위 개념 → 하위 항목으로 세부화 | 교육 설계, 기획안 작성, 시스템 설계 |
|  | 프롬프트 체이닝 (Prompt Chaining) | 단계 결과를 다음 단계 입력으로 연결 | 기획 → 질문 생성 → 콘텐츠 제작 등 다단계 작업 |
| 추론 결과 선택 | 자기 일관성 (Self-Consistency) | 다양한 추론 경로 → 가장 일관된 결론 선택 | 진로 추천, 정책 제안, 복잡한 판단 |
|  | 샘플링 투표 (Sampling Voting) | 동일 질문 여러 번 → 다수결로 결정 | 상식 퀴즈, 단답형 지식 검증 |
| 사고 보조 도구 | 스크래치패드 (Scratchpad) | 중간 계산·메모 저장하며 추론 진행 | 마케팅 전략, 계획 수립, 분석 과정 문서화 |
|  | 자기 평가 (Self-Evaluation) | 스스로 결과물 평가 → 개선점 도출 | 교육자료 검토, 콘텐츠 QA, 자기 수정 |
|  | 리액트 (ReAct) | 추론 + 도구 호출(검색, 계산 등) 병행 | 뉴스 수집 후 요약, 파일 분석 후 Slack 전송 등 |
| 생성·메타 전략 | 지식 생성 프롬프팅 (Knowledge Generation) | 새로운 지식·아이디어 창출 | 사업 아이디어, SF 스토리, 시나리오 기획 |
|  | 자동 프롬프트 엔지니어 | 좋은 프롬프트 자체를 AI가 설계·평가 | 프롬프트 최적화, QA, 반복 실험 |
| 실험적 접근 | 게으른 프롬프팅 (Lazy Prompting) | 일부러 간결한 지시로 모델 능력 실험 | 코드 수정, 요약 요청, 분석력 테스트 |

## 생각의 사슬

- 생각의 사슬(CoT, Chain Of Thought)은 문제를 해결하기 위해 단번에 결론 내려고 하기보다는 단계적으로 생각하여 정확도를 개선합니다.

### 제로샷 CoT

- 제로샷 CoT는 예시를 제공하지 않고(Zero-shot) 단순하게 '단계 별로 생각하라(Let's think step by step)'만 명시해주면 끝입니다.

```
내년까지 1천만 원을 모으고 싶은데, 월급이 300만 원이고 월 고정지출이 200만 원입니다.
단계적으로 생각하여 계획을 세워주세요.
```

### 명시적 CoT

- 명시적 CoT는 추론 절차를 직접 명시합니다. 
- 특정 일을 처리 하기 위한 절차를 지켜가며 생각하라고 지시하는 것과 마찬가지입니다. 
- 긴 고민과 생각이 필요한 의사결정 및 상담 과정에서 중요하게 여겨집니다.

```
- 당신은 자산 관리 전문가입니다.

# 지시
 
[자산]을 바탕으로 자산 상태를 평가한 뒤, 향후 관리 전략을 조언해주세요.  
아래 절차를 단계별로 따라가며 생각하세요.

# 자산

- 정기예금: 5,000만 원
- 현금: 3,000만 원
- 국내 주식: 7,000만 원
- 부동산(실거주 아파트): 4억 원
- 대출: 1억 2천만 원

# 절차

1. 유동자산(현금, 예금, 주식)과 비유동자산(부동산)을 분류하고 전체 자산 구성 비율 계산
2. 부채를 포함한 순자산 계산
3. 유동성 비율이 적절한지 평가 (유동자산 / 총자산)
4. 투자 자산의 비중과 위험도 검토 (주식 등)
5. 부동산 편중 여부 및 리스크 진단
6. 종합적으로 판단하여 재무 건전성 수준을 평가, 필요한 경우 리밸런싱 또는 대응 전략을 제시
```

## 탑다운

- 탑다운(Top-Down)은 상위 개념에서 하위 개념으로 구체화시키는 접근법입니다. 
- 하나의 큰 개념이나 목표를 정의하고 이를 달성하기 위한 구체적인 목표를 세울 때 유용합니다. 
- 계획 수립이나 시스템 설계, 교육 커리큘럼 구성 등에 자주 활용됩니다.

### 예시

```
- 당신은 프롬프트 엔지니어링 교육 전문가입니다.

# 지시

"비전문가를 위한 생성형 프롬프트 엔지니어링 입문 교육 과정"을 설계하려고 합니다.
Top-Down 방식으로 아래 항목들을 단계적으로 설계해주세요.

# 항목

1. 교육 목표 설정
2. 핵심 개념 및 주제 분류
3. 모듈별 주차 구성
4. 활동 및 과제 설계
5. 성과 평가 방법
```

## 프롬프트 체이닝

- 프롬프트 체이닝(Prompt Chaining)은 다단계로 구성되어 있고, 각 단계에서 나오는 산출물을 그 다음 단계의 입력 값으로 사용하는 구조를 가지고 있습니다.

### 예시

```
- 당신은 AI 콘텐츠 기획자입니다.

# 지시

비전문가가 흥미로워 할 법한 주제 5가지로 블로그 글을 작성해야 합니다.
다음의 단계에 따라 순차적으로 진행해보세요.

# 단계

1. 비전문가가 흥미로워 할 법한 AI 주제 5가지를 선정한다.
2. 각 주제에서 질문 3가지를 생성한다.
3. 각 질문에 대한 200자 이내의 짧은 문구를 생성한다.
```   

## CoT vs Prompt Chaining vs Top-down 

| 항목 | CoT(Chain of Thought) | Prompt Chaining | Top-down |
| --- | --- | --- | --- |
| 목적 | 추론 과정을 단계적으로 표현 | 복잡한 문제를 여러 단계로 분할 | 상위 개념을 하위로 구조화 |
| 구조 | 하나의 프롬프트 안에서 순차적 사고 흐름 유도 | 여러 개의 프롬프트로 나누어 단계별 실행 | 하나의 상위 목표를 하위 모듈로 계층적 분해 |
| 흐름 방식 | 내부적 사고 흐름 (Step 1 → Step 2 → 결론) | 결과 → 다음 입력에 직접 연결 (Output1 → Input2) | 개념 → 카테고리 → 세부 항목 → 실행 |
| 특징 | 사람이 생각하는 과정과 유사한 '사고의 사슬' | 다단계 파이프라인, 자동화 및 정제 가능 | 전체 구조 설계에 적합, 기획/교육 설계에 유용 |
| 사용 예 | 수학 문제 풀이, 재무 판단, 논리적 분해 |  |  |

## 자기 일관성

- 자기 일관성(Self-Consistency)은 다양한 추론 경로(생각)를 통해 논리적으로 가장 일관성 있는 대답을 최종 결론으로 채택하는 전략입니다.

### 예시

```
- 당신은 진로상담 전문가입니다.

# 지시

다음의 사용자의 성향과 능력을 바탕으로 가능한 진로 선택지를 여러 방향에서 다양하게 고려해본 뒤, 
그 중에서 가장 일관성 있고 설득력 있는 진로 방향을 제시해주세요.

# 성향

- 타인을 상담하거나 교육하는 일을 즐깁니다.
- 내향적인 성격으로 한 우물을 파고 몰입하는 일을 즐깁니다.
- 글을 쓰고 정리하고 체계화 하는 일을 즐깁니다.
- 작품에 대한 완벽주의적 성향이 있습니다.
- 불규칙적으로 즉흥적인 것보다 체계적이고 일관성 있는 환경을 선호합니다.
- 자유롭고 수평적인 조직문화에서 아이디어를 제시하는 것을 선호합니다.
- 실용주의적 성향으로 실험하고 능동적으로 문제를 인지하고 개선하는 것을 선호합니다.

# 능력

- 소프트웨어 웹 백엔드 개발(PHP 등)
- AI 어플리케이션 개발(프롬프트 엔지니어링, LangChain 등)
- 강의(인터넷 강의 등)
- 논리적 글쓰기(기술 블로그 작성 등)

※ 다양한 관점에서 분석하고 생각한 뒤, 가장 일관된 결론을 정리해주세요.
``` 

## 샘플링 투표

- 샘플링 투표(Sampling Voting)는 같은 프롬프트를 여러 번 수행하여 그 결과를 바탕으로 '다수결로 투표'하여 결정을 내립니다. 

### 예시

```
- 당신은 지식 검증 에이전트입니다.

# 지시

"지구에서 가장 높은 산은?"이라는 질문을 3회 반복 수행한 뒤, 
가장 자주 등장한 응답을 최종 정답으로 채택하세요.

# 질문

지구에서 가장 높은 산은?
```

## Self-Consistency vs Sampling Voting

| 항목 | Self-Consistency | Sampling Voting |
| --- | --- | --- |
| 목적 | 다양한 추론 경로를 통해 가장 논리적인 결론 선택 | 동일 질문에 대한 응답 중 가장 자주 등장한 답변 선택 |
| 추론 방식 | 각 응답이 서로 다른 논리 흐름을 따라감 | 동일한 프롬프트를 반복 실행해 응답 샘플을 수집 |
| 선택 기준 | 논리적 일관성 또는 설득력 있는 결론을 수작업/자동 기준으로 선택 | 빈도 수(다수결) 기반으로 가장 자주 나온 응답 선택 |
| 다양성 | 다양한 관점/해석 가능 → 응답 내용 다양함 | 동일 응답이 반복 → 정답형 문제에 강함 |
| 사용 예 | 진로 추천, 정책 제안, 창의적 판단 | 상식 퀴즈, 지식 기반 QA, 객관식 정답 검증 |
| 리스크 | 기준이 명확하지 않으면 선택 주관성 발생 | 오답이 다수 응답일 경우 오류 가능 |
| 응용 방식 | 각 응답 흐름을 비교 → 가장 설득력 있는 것 채택 | 다수 응답 집계 → 가장 빈도 높은 것 채택 |

## 스크래치패드

- 스크래치패드(Scratchpad)는 AI가 문제를 해결하는 과정에서 중간 계산이나 아이디어, 단계별 결과를 메모해두는 공간을 설정하고, 이를 저장/참조하며 사고 과정을 전개해 나가는 전략입니다.

> CoT 역시 전개 과정에서 메모(사고 기록)를 내부적으로 포함하기 때문에 넓은 의미에서 스크래치패드 프롬프팅의 한 형태로 볼 수 있습니다. 단, 스크래치패드 프롬프팅은 중간 결과를 보다 구조화된 형태로 저장하거나 변수처럼 다루는 경우까지 포함하기 때문에, CoT보다 더 확장된 개념으로 사용되기도 합니다.

### 예시

```
# 지시

고객 만족도를 높이기 위한 마케팅 켐페인 전략을 수립해주세요

# 메모장

- 고객 불만 요소
- 개선 아이디어
- 우선순위
- 리소스 고려
```

## 자기 평가

- 자기 평가(Self Evaluation)는 자신이 생성한 결과물에 대해 제시된 '기준'을 바탕으로 평가합니다.
- 결과에 대해 피드백을 바탕으로 반성(Reflexion)하여 수정사항을 제안할 수도 있습니다.

> 자체 평가가 가능하다는 점은 단일 AI 에이전트로도 생성 및 피드백이 가능하다는 것과 더 나아가 다중 에이전트 시스템에서 지시를 수행하고 결과물을 생성하는 에이전트와 이를 검사하고 평가를 담당하는 에이전트와 같이 역할을 분리하여 운영할 수 있음을 의미합니다. 

### 예시

```
# 상황

당신이 작성한 '비전문가'를 대상으로 하는 프롬프트 엔지니어링의 "기본 개념"에 대한 교안이 교육생으로부터의 [피드백]이 있었습니다.

피드백= "기술 용어가 너무 많아서 어려워요"

# 지시

문제의 원인을 파악하고, 개선 방향을 제시하고 수정된 교안을 다시 만들어보세요.

# 교안

프롬프트 엔지니어링(Prompt Engineering)은 대규모 언어 모델(LLM, Large Language Model)의 출력 최적화를 위해 입력 텍스트를 구조화하고 세분화하는 과정으로, 자연어 인터페이스 상에서의 명령어 구성 전략을 설계하는 고차원적 기술입니다. 이 기술은 LLM의 내재된 의미 공간(latent semantic space)을 효율적으로 탐색하기 위해, 프롬프트 템플릿, 조건적 문맥 삽입(conditional context injection), 샷 기법(few-shot, zero-shot, one-shot), 그리고 체인 오브 소트(chain-of-thought) 유도 등의 메타프롬프트 기법을 활용합니다.
```

## 리액트

- 리액트(ReAct)는 추론(Reasoning)+행동(Acting)의 합성어로, 문제 → 추론 → 행동 → 결과를 반복합니다.
- 행동(Acting)은 함수와 같은 외부의 도구를 호출해 그 결과를 응답으로 사용하는 방식입니다.
- 함수는 호출하기 전에 ChatGPT가 외부 함수와 상호작용할 수 있도록 정의하는 명세인 ChatGPT Function Call Spec에 따라 함수가 미리 정의되어 있어야 합니다.

> 함수(Function)는 소프트웨어 개발에서 주로 등장하는 개념으로, 특정 기능을 수행하는 절차나 연산에 이름을 지어준 것과 같습니다.

### 예시

```
- 당신은 IT제품 리뷰 크리에이터입니다.

# 상황

아이폰16 vs 갤럭시S25 비교영상을 제작하기 위해 다른 크리에이터의 영상을 참고하고자 합니다. 

# 지시

유튜브 동영상을 추천해주세요.

→ 단, 아래에 정의된 [함수]를 사용하고, [형식]에 따라 출력하세요.

# 함수

{
  "functions": [
    {
      "name": "search",
      "description": "유튜브에서 동영상을 검색합니다",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "검색어"
          }
        },
        "required": ["query"]
      }
    }
  ],
  "function_call": "auto"
}

# 형식

Thought: [추론]
Action: [행동] → Function Call(e.g. search(query="xyz"))
Observation: [결과]
...

Answer: [결론]
```

### 함수 시그니처

- ChatGPT Function Call Spec으로 함수를 정의하는 방식이 너무 복잡해보인다면, 개발자들이 코딩할때 함수를 정의하는 방식을 모사하여 정의해도 괜찮습니다.

```go
// 유튜브에서 동영상을 검색합니다
func search(query string)
```

## 지식 생성 프롬프팅

- 지식 생성 프롬프팅(Knowledge Generation Prompting)은 AI가 가지고 있지 않은 정보를 상상력과 창의력을 바탕으로 새로운 지식을 생성하는 기법입니다.
- 생성된 지식을 통합하여(Knowledge Integration) 사업 아이디어, 소설, 기획과 같이 현실에 나타나지 않은 '미래에 일어날 수도 있거나, 또는 허구의 일'을 설계할 때 사용할 수 있습니다.

> 다만, 생성형 AI가 지식을 완전히 새롭게 창조하는 것은 아니며, AI가 학습한 정보의 조합과 추론을 통해, 아직 현실에 존재하지 않지만 개연성 있는 아이디어나 시나리오를 생성하는 방식입니다.

### 예시

```
- 당신은 SF 소설가입니다.

# 지시

만약, 휴머노이드 로봇이 보편화되어 각 가정마다 집안일을 대신한다면
발생할 수 있는 문제는 어떤 것들이 있고,

제기된 문제를 기반으로 블로그에 기고할 에세이를 써보세요.
```

## 자동 프롬프트 엔지니어

- 자동 프롬프트 엔지니어(APE; Automatic prompt engineer)는 자기 평가(Self Evaluation)를 사용하여 프롬프트 생성을 위임합니다. 
- 기준에 가장 잘 부합하는 프롬프트를 여러 번 시도하여, 가장 유망한 후보군을 추립니다.
- 큰 맥락를 보고 간결한 프롬프트를 생성하거나, 긴 프롬프트를 짧게 바꿔주는 등의 추가 전략을 구사할 수 있습니다.

> '프롬프트를 위한 프롬프트'를 만드는 방법이라 하여 메타 프롬프팅(Meta Prompting) 기법이라고도 합니다.

### 예시

```
- 당신은 프롬프트 엔지니어입니다.

# 지시

[요청]를 기반으로 

1. [기준]에 전부 부합하는 답변을 얻을 만한 프롬프트 후보를 생성하세요.
2. 각 프롬프트에 점수(0.0~1.0)를 부여하세요.

# 요청

프롬프트 엔지니어링 교재를 작성하기 위한 프롬프트를 작성해주세요.

# 기준

- 비전문가를 위해 기술적 용어 사용을 자제하였나요?
- 프롬프트 엔지니어링의 기본 개념, 전략, 테스트에 대한 내용이 잘 나타나 있나요?
- LLM에 대한 기본개념을 알 수 있도록 작성되어 있나요?
```  

## 게으른 프롬프팅

- 게으른 프롬프팅(Lazy Prompting)은 구체적인 맥락과 조건을 의도적으로 생략하고 간결한 프롬프트를 제공합니다.
- 맥락이 주어지지 않더라도 문제를 해결하기 위한 학습이 되어있다는 것을 전제로 합니다.
- 데이터 분석, 코딩처럼 감정이나 맥락이 포함되지 않은 분야에 적합합니다.
- 의도적으로 단순한 프롬프트를 주고 모델의 분석력/창의성을 시험하기 위해 사용해볼 수도 있습니다. 

> 게으른 프롬프트와 프롬프트 엔지니어링이 되지 않은 프롬프트와의 차이는 사용자의 '의도'에 있습니다.

### 예시

```
# 지시

고쳐줘

# 코드

print(Hello, world)
```

## 정리

| 전략 | 설명 | 예시 |
| --- | --- | --- |
| 생각의 사슬 (CoT) | 단계적으로 생각하며 답을 유도 | "Let's think step by step" |
| 탑다운 (Top-down) | 큰 개념 → 세부 항목으로 구조화 | "교육 과정 설계 시 목표 → 주제 → 활동 → 평가" |
| 프롬프트 체이닝 | 각 단계 결과를 다음 단계 입력으로 사용 | "1. 주제 선정 → 2. 질문 생성 → 3. 답변 생성" |
| 자기 일관성 (Self-Consistency) | 다양한 경로로 생각 후 가장 일관된 결론 선택 | 진로 추천 시 여러 각도에서 분석 후 종합 판단 |
| 샘플링 투표 (Sampling Voting) | 동일 프롬프트 여러 번 수행 → 다수결 채택 | "지구에서 가장 높은 산은?" 3회 반복 후 다수 응답 선택 |
| 스크래치패드 | 중간 계산/메모를 저장하며 진행 | "메모장: 고객 불만 요소 → 개선 아이디어 → 우선순위" |
| 자기 평가 (Self-Evaluation) | 결과물에 대한 자체 평가 및 개선 | "피드백: 용어가 어려워요 → 쉬운 표현으로 수정" |
| 리액트 (ReAct) | 추론과 행동(도구 호출)을 병행 | "뉴스 수집 후 요약 → Slack 전송" |
| 지식 생성 프롬프팅 | 새로운 지식 생성, 창의적 아이디어 설계 | "미래 사회에서 가정용 로봇이 보편화된다면?" |
| 자동 프롬프트 엔지니어 | 프롬프트 자체를 평가·생성 | "각 프롬프트에 점수 부여 → 최고 점수 채택" |
| 게으른 프롬프팅 | 일부러 간단한 요청으로 모델의 능력 테스트 | "고쳐줘" → 코드 수정 |

## 요약

- 추론 전략은 AI가 답변을 도출하는 과정을 설계하는 방법입니다.
- 단계적 사고(CoT), 체이닝, 탑다운, 자기 평가 등 다양한 기법이 있습니다.
- 작업의 복잡도와 목적에 따라 적절한 전략을 선택하면 정확성과 신뢰도가 높아집니다.

## 생각해보기

- 생각의 사슬(CoT)과 프롬프트 체이닝은 어떤 점에서 비슷하고 어떤 점이 다를까요?
- 샘플링 투표와 자기 일관성 중 어떤 상황에서 각각 더 적합할까요?
- 리액트(ReAct) 전략이 필요한 실제 업무 사례에는 어떤 것이 있을까요?
- 자동 프롬프트 엔지니어 전략은 어떤 문제를 해결해줄 수 있을까요?
- 게으른 프롬프팅을 사용할 때 주의해야 할 점은 무엇일까요?

---

[기본 요소](02-Basics.md) ← 이전 / 다음 → [멀티턴](04-Multi-turn.md)